<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anvesi1 Software</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container mt-5" id="authContainer">
        <h1 class="text-center mb-4">Anvesi Software</h1>
        <div class="card p-4 shadow-lg text-center">
            <h3>Login</h3>
            <input type="text" id="username" class="form-control my-2" placeholder="Enter username">
            <input type="password" id="password" class="form-control my-2" placeholder="Enter password">
            <button class="btn btn-primary mt-2" onclick="authenticate()">Login</button>
        </div>
    </div>
    
    <div class="container mt-5 d-none" id="mainApp">
        <div class="d-flex justify-content-between align-items-center">
            <h1>Anvesi Software</h1>
            <button class="btn btn-danger" onclick="logout()">Logout</button>
        </div>
        <h3 class="text-center" id="greeting"></h3>
        <h3 class="text-center" id="currentDate"></h3>
        
        <div class="card p-4 shadow-lg">
            <h3 class="text-center">Clock In/Out</h3>
            <div class="text-center">
                <input type="time" id="clockInTime" class="form-control w-50 d-inline" placeholder="Clock In Time">
                <button class="btn btn-success m-2" onclick="clockIn()">Clock In</button>
            </div>
            <div class="text-center mt-3">
                <input type="time" id="clockOutTime" class="form-control w-50 d-inline" placeholder="Clock Out Time">
                <button class="btn btn-danger m-2" onclick="clockOut()">Clock Out</button>
            </div>
            <div class="text-center mt-3">
                <button class="btn btn-primary" onclick="saveEntries()">Save</button>
            </div>
        </div>
        
        <div class="card p-4 shadow-lg mt-4">
            <h3 class="text-center">History</h3>
            <ul id="history" class="list-group mt-3"></ul>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            if (localStorage.getItem("authenticated") === "true") {
                showMainApp();
            }
            displayCurrentDate();
        });

        function authenticate() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            if (username && password === "password") {
                localStorage.setItem("authenticated", "true");
                localStorage.setItem("username", username);
                showMainApp();
            } else {
                alert("Invalid credentials! Try again.");
            }
        }

        function showMainApp() {
            document.getElementById("authContainer").classList.add("d-none");
            document.getElementById("mainApp").classList.remove("d-none");
            loadHistory();
            displayGreeting();
        }

        function displayGreeting() {
            const username = localStorage.getItem("username") || "User";
            document.getElementById("greeting").textContent = `Welcome, ${username}!`;
        }

        function displayCurrentDate() {
            const today = new Date();
            const formattedDate = today.toDateString();
            document.getElementById("currentDate").textContent = formattedDate;
        }

        function clockIn() {
            const time = document.getElementById("clockInTime").value;
            if (time) {
                saveHistory("Clock In: " + time);
            } else {
                alert("Please enter a valid time.");
            }
        }

        function clockOut() {
            const time = document.getElementById("clockOutTime").value;
            if (time) {
                saveHistory("Clock Out: " + time);
            } else {
                alert("Please enter a valid time.");
            }
        }

        function saveEntries() {
            const clockInTime = document.getElementById("clockInTime").value;
            const clockOutTime = document.getElementById("clockOutTime").value;
            
            if (clockInTime) {
                saveHistory("Clock In: " + clockInTime);
            }
            if (clockOutTime) {
                saveHistory("Clock Out: " + clockOutTime);
            }
            
            if (clockInTime || clockOutTime) {
                alert("Entries saved successfully!");
            } else {
                alert("Please enter at least one time entry.");
            }
        }

        function saveHistory(entry) {
            let history = JSON.parse(localStorage.getItem("history")) || [];
            history.unshift(entry); // Add new entry to the beginning
            localStorage.setItem("history", JSON.stringify(history));
            loadHistory();
        }

        function loadHistory() {
            let history = JSON.parse(localStorage.getItem("history")) || [];
            const historyList = document.getElementById("history");
            historyList.innerHTML = "";
            history.forEach(item => {
                let li = document.createElement("li");
                li.className = "list-group-item";
                li.textContent = item;
                historyList.appendChild(li);
            });
        }

        function logout() {
            localStorage.removeItem("authenticated");
            localStorage.removeItem("username");
            document.getElementById("mainApp").classList.add("d-none");
            document.getElementById("authContainer").classList.remove("d-none");
        }
    </script>
</body>
</html>

